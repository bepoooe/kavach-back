(()=>{"use strict";(new class{constructor(){this.privacyPolicyUrls=[],console.log("ðŸ” Kavach Content Script starting on:",window.location.href),this.detectPrivacyPolicies(),this.injectTrackingDetector(),console.log("âœ… Kavach Content Script initialized")}detectPrivacyPolicies(){const e=["privacy policy","privacy statement","privacy notice","terms of service","terms and conditions","data policy","cookie policy","legal","gdpr","ccpa"];['a[href*="privacy"]','a[href*="terms"]','a[href*="policy"]','a[href*="legal"]','a[href*="gdpr"]','a[href*="ccpa"]'].forEach((t=>{document.querySelectorAll(t).forEach((t=>{const c=t.href,i=t.textContent?.toLowerCase()||"";c&&!this.privacyPolicyUrls.includes(c)&&e.some((e=>i.includes(e)||c.toLowerCase().includes(e)))&&this.privacyPolicyUrls.push(c)}))})),document.querySelectorAll('footer, .footer, [class*="footer"]').forEach((t=>{t.querySelectorAll("a").forEach((t=>{const c=t.href,i=t.textContent?.toLowerCase()||"";c&&!this.privacyPolicyUrls.includes(c)&&e.some((e=>i.includes(e)))&&this.privacyPolicyUrls.push(c)}))})),this.privacyPolicyUrls.length>0&&chrome.runtime.sendMessage({action:"privacyPoliciesFound",urls:this.privacyPolicyUrls,currentUrl:window.location.href}).catch((e=>{console.log("Failed to send privacy policy URLs:",e)}))}injectTrackingDetector(){const e=document.createElement("script");e.src=chrome.runtime.getURL("injected.js"),e.onload=function(){this.remove()},(document.head||document.documentElement).appendChild(e)}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{setTimeout((()=>{this.detectPrivacyPolicies()}),1e3)})):setTimeout((()=>{this.detectPrivacyPolicies()}),1e3),setTimeout((()=>{this.detectPrivacyPolicies()}),3e3)}}).init()})();