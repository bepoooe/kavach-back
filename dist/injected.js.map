{"version":3,"file":"injected.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://kavach-trial/./src/injected/index.ts"],"sourcesContent":["\"use strict\";\n// Injected script that runs in the page context to detect client-side tracking\n(function () {\n    'use strict';\n    // Store the original fetch function\n    const originalFetch = window.fetch;\n    // Define a proxy fetch function to intercept requests\n    const trackingFetch = function (input, init) {\n        const url = typeof input === 'string' ? input : input.url;\n        // Check for tracking patterns\n        if (isTrackingRequest(url)) {\n            console.log('Kavach: Detected tracking request via fetch:', url);\n            reportTrackingAttempt(url, 'fetch');\n        }\n        // Proceed with the original fetch call\n        return originalFetch.apply(window, [input, init]);\n    };\n    // Replace the global fetch with the proxy\n    window.fetch = trackingFetch;\n    // Detect common tracking patterns\n    function isTrackingRequest(url) {\n        const trackingPatterns = [\n            /google-analytics\\.com/,\n            /googletagmanager\\.com/,\n            /doubleclick\\.net/,\n            /facebook\\.com\\/tr/,\n            /connect\\.facebook\\.net/,\n            /amazon-adsystem\\.com/,\n            /twitter\\.com\\/i\\/adsct/,\n            /linkedin\\.com\\/collect/,\n            /track|analytics|pixel|beacon/i\n        ];\n        return trackingPatterns.some(pattern => pattern.test(url));\n    }\n    // Report tracking attempts to content script\n    function reportTrackingAttempt(url, method) {\n        window.postMessage({\n            type: 'KAVACH_TRACKING_DETECTED',\n            url: url,\n            method: method,\n            timestamp: Date.now()\n        }, '*');\n    }\n    // Monitor canvas fingerprinting\n    const originalToDataURL = HTMLCanvasElement.prototype.toDataURL;\n    HTMLCanvasElement.prototype.toDataURL = function () {\n        console.log('Kavach: Canvas fingerprinting detected');\n        reportTrackingAttempt(window.location.href, 'canvas-fingerprint');\n        const result = originalToDataURL.apply(this, arguments);\n        return result;\n    };\n    console.log('Kavach: Tracking detection initialized');\n})();\n"],"names":[],"sourceRoot":""}